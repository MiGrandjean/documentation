////
; Copyright (c) uib gmbh (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; http://creativecommons.org/licenses/by-sa/3.0/de/
; http://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; http://creativecommons.org/licenses/by-sa/3.0/
; http://creativecommons.org/licenses/by-sa/3.0/legalcode
; 
; credits: http://www.opsi.org/credits/
////

////
;***************************************************************************
; Subversion:
; $Revision$ $Author$
; $Date$
;***************************************************************************
////

:Author:    uib gmbh
:Email:     info@uib.de
:Date:      22.08.2014
:Revision:  4.0.5
:doctype:		book

// Include common opsi terms
include::../common/opsi_terms.asciidoc[]

= opsi Version 4.0.5 Release Notes

// Include common opsi copyright
include::../common/opsi_manual_copyright.asciidoc[]

[[opsi-405-releasenotes-overview]]
== Overview of the new features

The opsi Service Release 4.0.5 comes with a whole bunch of new features and improvements. Here comes a survey:

* with opsi 4.0.5 (exclusively) the following distributions are supported as opsi-server: +
** Ubuntu: 10.04 (Lucid), 12.04 (Precise), 14.04 (Trusty)
** Debian: 6.0 (Squeeze), 7.0 (Wheezy)
** UCS 3.0, 3.1, 3.2
** openSUSE 12.3, 13.1
** SLES 11SP1, 11SP3
** Fedora 20
** RHEL 6
** CentOS 6.5



IMPORTANT: For the following distributions the opsi 4.0.5 opsi server packets are not available with the first part-delivery: +
Ubuntu: 14.04 (Trusty): 
All packets but the opsi-atftpd are available. For tests can the opsi-atftpd from 12.04 (Precise) be taken. +
UCS: 3.0, 3.1, 3.2 +
SLES: 11SP1, 11SP3 +
Fedora: 20 +
RHEL: 6 +
CentOS: 6.5 +
We are working hard on providing the packets as soon as possible.

If you are using an OS version which is not contained in the list above, we recommend updating the OS before installing opsi v 4.0.5 einspielen.

KNOWN BUGS:
In the testing release, the configed applet does yet not start.

KNOWN PROBLEMS:
On XP host there is  a great probability that the configed webstart version does not start. 
The reason is that it report a max heap requirement of 1000 MB, but XP does not offer it, even if it exists.
We recommend to use the opsi Localboot product opsi-configed.


* opsi server components: +
Diverse improvements and bugfixes for the server packets.

* New opsi-bootimage based on Ubuntu Precise / Kernel 3.15.1 supporting new hardware (like tablets), UEFI support and support for Linux disc encryption.

* Windows netboot products +
** Driver integration per 'byAudit' also for 'vendor' and 'model' of the motherboards
** When applicable full UEFI/GPT compatibility
** New property 'setup_after_install' for automation.

* opsi-winst / opsi-script: +
** Logging changed to c:\opsi.org\log\opsi-script.log

** New constants:

*** `%opsiDepotId%` : Depotserver // since 4.11.4

*** `%opsiTmpDir%` : `c:\opsi.org\tmp` // since 4.11.4.3

*** `%opsiLogDir%` : `c:\opsi.org\log` // since 4.11.4.3

** New features for handling key/value pairs in config files:

*** String function: `getValueFromFile(`<key string>, <file name>`)` //since 4.11.4.4 [W/L]

*** string function: `getValueFromFileBySeparator(`<key string>,<separator string>,<file name>`)` //since 4.11.4.4 [W/L]

*** PatchTextFile section commands:

*** `setKeyValueSeparator` <separator char> //since 4.11.4.4 [W/L]

*** `setValueByKey` <keystr> <valuestr> //since 4.11.4.4 [W/L]

** Encoding functions (please read the manual !):

*** string function `reencodestr(` <str> , <from>, <to> `)`

*** stringlist function `reencodestrlist(` <strlist> , <from>, <to> `)`

** Miscellaneous:

*** `saveTextFile(`<list>, < filename>`)` //since 4.11.4.4 [W/L]

*** stringlist function `shellCall(` <cmd> `)` ; returns the output of (sysnative) shell with cmd

*** comman `IncludeLog` with additional encoding parameter

* Miscellaneous products: +

** Fixes in swaudit

* opsi-configed: +
many new features and improvements: for details see corresponding chapter.

* opsi Linux support: +
see corresponding chapter 

* opsi uefi (Netboot) Unterstützung: +
see corresponding chapter 

* Images with opsi clonezilla: +
see corresponding chapter 

* opsi extension opsi-local-image (for restoring class room clients): +
see corresponding chapter 

* opsi-setup-detector (wizard for creating opsi packets): +
see corresponding chapter 

* opsi-client-agent: +
** fixes for Windows 8.x (Loginblocker)

////
For details please refer to the opsi-v405-releasenotes manual and the revised opsi manuals.
////

[[opsi-405-releasenotes-samba4]]
== Samba 4
The first distributions will be delivered with Samba 4.
Currently Ubuntu 14.04 and openSuse 13.1 are equipped with Samba 4 packets. These packets are not suitable to manage whole domains, but act like Samba 4 regarding the shares.
With Samba 3 the default was, that every file or directory was executable on the clients. This behaviour changed with Samba 4. Now all files, that shall be executable from the share, must also have the executable bit set on the Unix side.
This results in a basic problem with running opsi. It is not possible to bypass this behaviour from the rights management, for it would require fundamental changes of the rights management of opsi, that can't be done with opsi 4.
So for handling this problem with opsi 4.0 there are two ways: 
1. for the affected shares this behaviour can be supressed by elevating the share privileges of each member of the pcpatch group by setting the following option from the share configuration:
admin users = @pcpatch
This fix elevates the privileges of the Samba processes and has already been used by opsi for some time for UCS >= 3 with Samba 4.
opsi installs per default for Samba 4 distributions with opsi-setup --auto-configure-samba this option for the opsi_depot share. This share is mounted read only, so the safety and security risk can be estimated as low.
2. Also the following global option can be set in the smb.conf:
allow general executable = True
With this option for all shares the behaviour of Samba 3 is restored.
To restore the old behaviour for all shares, the setting of the first option can be done for every share manually, or the option 2 can be set global in the smb.conf. Using the second option changes the behaviour for all shares, not onl for the opsi shares.

[[opsi-405-releasenotes-eol]]
== Discontinuation

This chapter lists the discontinued versions. For several reasons, these distribution versions will not be supported by opsi anymore.

[[opsi-405-releasenotes-eol_windows]]
=== Discontinuation: Windows versions

With opsi v 4.0.5 the maintenance of the netboot packets for Windows Vista and Server 2008 is discontinued. Also the update abonnements will not support these Windows versions anymore. For questions or problems regarding the discontinuation please contact us.

Windows XP / Server 2003 is not supported by Microsoft anymore. Because of the still frequent use of these versions, we will continue to maintain these packages for some time. Nevertheless we announce the discontinuation in short time and it is recommended to updade the clients to recent Windows versions (or Linux).

[[opsi-405-releasenotes-eol_opsiprod]]
=== Abkündigung: opsi Produkte
With opsi v 4.0.5 the following products are not supported any more:
* ntfs-write-image
* ntfs-restore-image
They are replaced by the new product opsi-clonezilla (for details see the related chapter).
[[opsi-405-releasenotes-eol_python25]]
=== Discontinuation of Python 2.5 support

Because no more updates are available for Python version 2.5, this version is not supported by opsi anymore. Opsi requires Python 2.6 or Python 2.7.






[[opsi-405-releasenotes-installation]]
== Installation notes

For safety reasons we recommend before installing the update to make a backup of your backends with opsi-backup:
[source,prompt]
----
opsi-backup create
----

The products contained in this release in many cases depend on each other. So do not try to install just a part of this update. 

First update the server, then the opsi products.

When upgrading an existing opsi server your package manager may ask you if you want to replace `/etc/opsi/opsi.conf` with a newer version.
If this question appears and you did not change the mentioned file you can replace the file with the new one.
If you changed the file or are unsure please deny the replacement.

[[opsi-405-releasenotes-installation-opsipackages]]
=== Notes for updating opsi-packets

////
Bitte nachstehenden Block bei release nicht löschen sondern auskommentieren
////
For installing the experimental server packets the opsi repository has to be changed from 'opsi40' to 'opsi40-experimental'. +
In case of Ubuntu 12.04: +
`deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/opsi40/xUbuntu_12.04 ./` +
ersetzen durch: +
`deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/opsi40-experimental/xUbuntu_12.04 ./`

Then the packets can be updated. +
For example Ubuntu / Debian:
[source,prompt]
----
aptitude update
aptitude dist-upgrade
----

For installaing the experimental opsi products 
[source,prompt]
----
cd /home/opsiproducts
mkdir opsi-v405
cd opsi-v405
# Standard Pakete:
wget -r -l1 -nc -nd -A "*.opsi" http://download.uib.de/opsi4.0/experimental/opsi-v405/products/
# opsi-local-image Pakete:
wget -r -l1 -nc -nd -A "*.opsi" http://download.uib.de/opsi4.0/experimental/opsi-v405/opsi-local-image/
# opsi-linux Pakete:
wget -r -l1 -nc -nd -A "*.opsi" http://download.uib.de/opsi4.0/experimental/opsi-v405/opsi-linux/
opsi-package-manager -i *.opsi
----
In case the wget command fails, the environment parameter http_proxy has to be patched (e.g. http_proxy=http://192.168.1.5:8080/)
Another option is to set in `/etc/opsi/opsi-product-updater.conf`
in the section `[repository_uib]` the following:
[source,prompt]
----
dirs = opsi4.0/testing/opsi-v405/products, opsi4.0/testing/opsi-v405/opsi-local-image, opsi4.0/testing/opsi-v405/opsi-linux
----
Then execute the opsi-product-updater.
To install all packets:
[source,prompt]
----
opsi-product-updater -i -vv
----
To install updates only:
[source,prompt]
----
opsi-product-updater -vv
----

////
Bitte vorstehenden Block bei release nicht löschen sondern auskommentieren
////
////

The installation does not require any special action. It is performed within the normal updates of your server and opsi products.

First update the server according to the update command of your Linux distribution. +
Then update the opsi products with the opsi-product-updater:

[source,prompt]
----
opsi-product-updater -i -vv
----
////

In case of a multi depot installation, first upgrade the config-server before s upgrading the depot server.

[[opsi-configed]]
== opsi-configed 4.0.5.

[[opsi-405-releasenotes-configed-depotserver-auswahl]]
=== Depot server selection
It is no longer necessary to perform a complete reload. Simply select one or more depots and you will receive the corresponding data. Because of the new characteristics of the modules there is no need for a complete Data-Reload, when you choose a depot the data will instantly be updated.
The new buttons have the following specifications: 

* (=+) : Marks all depots with identical product stocks.
* (++) : Marks all depots (you can also use _Ctrl-a_) 

.'{opsi-configed}': Depot server selection
image::../images/opsi-configed-depotserver-selection.png["{opsi-configed}: Depot server selection", width=250] 


[[opsi-405-releasenotes-configed-client-reachable]]
=== Client reachability
The feature testing client reachability has been extended to run in the background and then show the results in the client table. It can be enabled from the logon screen mask and per command line parameter. Default is a test interval of 0 min (= deactivated). +
 image:../images/opsi-configed-client-reachable.png["Client reachable",width=20] : Client reachable +
 image:../images/opsi-configed-client-unreachable.png["Client unreachable",width=20] : Client unreachable


[[opsi-manual-configuration-tools-opsi-configed-failedactions]]
=== Failures with product

The group ``REPORT: FAILED'' has been removed. There are new options under the menu item _Selection_ - _Failures with product_ and _Failures occurred_ (today, since yesterday, ...). +
Choose the first setting to get a list of all products. If you select one product all clients will be shown, where the installation of this product failed. Choose e.g. _Failures occurred_ - _today_ to get all clients, where at least one product failed today. 

.'{opsi-configed}': Failures occurred - today
image::../images/opsi-configed-failedactions-today_en.png["{opsi-configed}: Failures occurred - today", width=300] 


[[opsi-405-releasenotes-configed-product-defaultproperties]]
=== Product default properties
To change the default values of the products for one or more opsi-depots, there is a new tab, called _Product default-properties_.
This is only available if you select _Properties of depots_ (which is the second button at the top right hand side). +
In the main table, all products are listed with the product version as well as the package version. 

If a product is selected, at the top of the right side (as is customary for the client product configuration) general information about the product packets is shown. Below is the list of all depots, that have installed the selected product. The table below with the property keys and values is also known from the client product configuration.

[[image-configed-product-defaultproperties]]
.'{opsi-configed}': product default properties
image::../images/opsi-configed-produkt-defaultproperties-jedit-verschiedene-werte.png["{opsi-configed}: Product default properties: jEdit", width=500]
You can select a single depot or multiple depots to change the default values (which are also called the depot values) of the product. As the default, all available depots are preselected. With the usual shortcuts (_Ctrl-a_, _Ctrl-Click_ or _Shift-Klick_) multiple or all clients can be selected. + 
If the property value is shown greyed (see <<image-configed-product-defaultproperties>> - ``gui_language''), the values for that property differ on the selected depots. On the right side of the depots are three buttons: 

* (=+): Mark all depots that have identical values  +
All depots, that have the same default values, are marked.
* (++): All depots are marked.
* (globe): set the packet default values +
The original packet default values of the products will be set fot the selected depot(s).


[[opsi-405-releasenotes-bootimage]]
== Opsi-linux-bootimage

Das opsi-linux-bootimage has been basically revised and redesigned. First it had been updated to Ubuntu 12.04, because many functions that are required for the new opsi modules, are not available with Ubuntu 10.04.

So all parts of the bootimage have been updated.

[[opsi-405-releasenotes-bootimage-byaudit-fallback]]
=== Fallback for byAudit

For some time opsi has the feature to automatically add the additional drivers based on the hardware inventory. This feature depends on the proper "branding" of the hardware by the hardware manufacturer. Large OEMs like Dell, HP or Fujitsu Siemens usually dfo a proper branding.

But more and more charges of hardware are supplied by small distributors, that do not make a proper branding. Often these clients come with identical hardware, but when trying to identify the hardware manufacturer and the device model, the corresponding values are not set.

To handle this situation, opsi 4.0.5 comes with a fallback that is based on the motherboard. This feature is basically the same as the actual byAudit driver assignment, with the only difference that, instead of manufacturer and device model, as fallback the same process with the manufacturer and the name of the board is applied.


include::../common/opsi_manual_linux.asciidoc[]

include::../common/opsi_manual_uefi.asciidoc[]

include::../common/opsi_manual_clonezilla.asciidoc[]

include::../common/opsi_manual_local-image.asciidoc[]

include::../common/opsi_manual_setup_detector.asciidoc[]



[[opsi-405-releasenotes-misc]]
== Miscellaneous

[[opsi-405-releasenotes-misc-changelogs]]
=== Changelogs:


[[opsi-405-releasenotes-misc-changelogs-opsi-configed]]
==== Changelog opsi-configed

opsi-configed (4.0.5.1.2-1) testing; urgency=low

  * use remoteurl instead of depotserver url for install package as well

 -- rupert roeder <roeder@bonifax.uib.local>  Wed, 22 Aug 2014 09:38:22 +0200

opsi-configed (4.0.5.1.1-1) testing; urgency=low

  * use remoteurl instead of depotserver url

 -- rupert roeder <roeder@bonifax.uib.local>  Wed, 21 Aug 2014 09:38:22 +0200

opsi-configed (4.0.5.1-1) testing; urgency=low

  * redesign of some data structures

 -- rupert roeder <roeder@bonifax.uib.local>  Wed, 20 Aug 2014 09:38:22 +0200

opsi-configed (4.0.4.2.9-1) experimental; urgency=low

  * message window when heap overflow

 -- rupert roeder <roeder@bonifax.uib.local>  Wed, 13 Apr 2014 09:38:22 +0200

opsi-configed (4.0.4.2.7-1) experimental; urgency=low

  * less fat data transmission for swaudit

 -- rupert roeder <roeder@bonifax.uib.local>  Wed, 09 Apr 2014 09:38:22 +0200

opsi-configed (4.0.4.2.5-1) experimental; urgency=low

  * integrating accelerated swaudit into selection methods
  * data loading observer pattern for configed start

 -- rupert roeder <roeder@bonifax.uib.local>  Mon, 01 Apr 2014 14:10:37 +0100

opsi-configed (4.0.4.2.4-1) experimental; urgency=low

  * activity indicator
  * created stub class for remote data
  * several data types included in stub
  * accelerated swaudit function

 -- rupert roeder <roeder@bonifax.uib.local>  Fri, 14 Mar 2014 14:10:37 +0100

opsi-configed (4.0.4.2.3-1) experimental; urgency=low

  * accelerated depot switching
  * other depot issues fixed
  * gzip compression is no default

 -- rupert roeder <roeder@bonifax.uib.local>  Thu, 13 Mar 2014 14:10:37 +0100


[[opsi-405-releasenotes-misc-changelogs-opsi-client-agent]]
==== Changelog opsi-client-agent

opsi-client-agent (4.0.4.5-4) stable; urgency=low

  * opsi-winst 4.11.4.4
  
 -- Detlef Oertel <d.oertel@uib.de>  Fri, 25 Apr 2014 15:00:00 +0100


opsi-client-agent (4.0.4.5-3) stable; urgency=low

  * new opsiloginblocker.dll V1.2.0.5/credential provider filter (no multiple timeouts)
  * new opsigina.dll 1.3.0.2 (no multiple timeouts) 
  * fix in lib directory of opsi-winst; https://forum.opsi.org/viewtopic.php?f=6&t=6142
  * sub_restore_productOnClient: restore productOnClient if found in c:\opsi.org\tmp (for capture image use)
  * opsi-winst 4.11.3.11
  
 -- Miriam Michaelis <m.michaelis@uib.de>  Tue, 18 Mar 2014 15:00:00 +0100

opsi-client-agent (4.0.4.5-2) stable; urgency=low

  * opsi-winst 4.11.4.3
  * use of isDriveReady to disable  critical-error-handler message box. (Drive not ready)  
  
 -- Detlef Oertel <d.oertel@uib.de>  Thu, 20 Mar 2014 15:00:00 +0100


opsi-client-agent (4.0.4.5-1) stable; urgency=low

  * new credential provider filter with fix for >= nt6.2 opsiloginblocker.dll V1.2.0.2
  * loginblocker logfile written to dir opsi.org\log
  
 -- Miriam Michaelis <m.michaelis@uib.de>  Tue, 18 Mar 2014 15:00:00 +0100


[[opsi-405-releasenotes-misc-changelogs-opsi-winst]]
==== Changelog opsi-winst

opsi-winst/opsi-script (4.11.4.4) stable; urgency=low

  * osfunclin: RunCommandAndCaptureOut: Log exitcode on Loglevel LLInfo
  * osparser: linkActionsMain: fix for index out of bound (while (i <= Sektion.count))  fixes: #958
  * osfunc: StartProcess_cp: log error if time out is reached (inc's error counter)  fixes #506
  * new commands in PatchTextFile (osparser:doTextpatchMain):
         'setKeyValueSeparator char' sets Separator for key value pairs (default is '=')
         'setValueByKey keystr valuestr' search exitsing key and sets the given value.
           If the key not exists, the key/value pair will be created below the line cursor.
  * osparser: scriptstopped := true on ExitWindows /ImmediateReboot and  /ImmediateLogout
  * new function: getValueFromFile (<key string>,<file name> ) : string
  * new function: getValueFromFileBySeparator (<key string>,<separator string>,<file name> ) : string
  * new function: saveTextFile(<list>, < filename>) : bool
  * osparser: TuibInstScript.doAktionen: output initalized (created) fixes #974
  * osfunc: enhanced: TXStringList.getStringValue
  * osparser: produceStringlist: fix in emptylist() function

-- Detlef Oertel <d.oertel@uib.de>  Thu,  20 Mar 2014:15:00:00 +0200


opsi-winst/opsi-script (4.11.4.3) stable; urgency=low

  * opsparser: doFileActions: fix for mixed File section modifiers
  * osfunc: TuibRegistry.WriteEntry: fix logging if regtype is changed: fixes #780
  * osfunc: wait for parent ending also if waitforprocessending is true
  * osfunc: FileCopyWin: use of windows.copyFile instead of fileutils.copyFile
  * osparser: Stingreplace with IgnoreCase for %userprofiledir%  fixes #877
  * osparser: new constant %opsiTmpDir% (c:\opsi.org\tmp ; /tmp )
  * osparser: new constant %opsiLogDir% (c:\opsi.org\log ; /var/log/opsi-client-agent/opsi-script )
  * osparser: new command: FatalOnRuntimeError (default = false)
  * osparser: takeString: LogError if index out of bounds; Fatal if FatalOnSyntaxError
  * oslog: escape control chars
  * osfunc: allcopy/execdelete: handle directories with additional attributes (e.g. hidden)
  * osparser: new function doRegistryNTUserDat
  * new Registry Parameter /NTuserDat: <path to ntuser.dat>
  * osmain: ProcessProduct: looks before processing a product if there is still a action request
  * osparser: for fileExists: replace GetFileInfo by  "FileExists() or DirectoryExists()"
  * fixes to really stop the script interpretation after isfatalerror, issuccess, issuspended
  * new unit opsihwbiosinfo based on tsmbios
  * new infomap getHWBiosInfoMap
  * new bool function runningOnUefi      fixes #908
  * new bool function isDriveReady(str)
  * doFileActions: disable windows critical Error Message boxes (SetErrorMode(SEM_FAILCRITICALERRORS))

-- Detlef Oertel <d.oertel@uib.de>  Mon,  9 Dec 2013:15:00:00 +0200



opsi-winst/opsi-script (4.11.4.2) stable; urgency=low

  * make 4.11.4 working under windows
  * osencoding: searchencoding: new methode to read encoding
  * osinteractivegui: opendialog knows now *.ins and *.opsiscript
  * new string function reencodestr(str, from, to)
  * new stringlist function reencodestrlist(strlist, from, to)
  * new stringlist function shellCall( cmd ) ; returns the output of (sysnative) shell with cmd
  * getipByName now uses resolveip at linux
  * manifest extended for win 8.1: <supportedOS Id="{1f676c76-80e1-4239-95bb-83d0f6d0da78}"/>:
    http://msdn.microsoft.com/en-us/library/windows/desktop/dn302074%28v=vs.85%29.aspx
  * fix: use of sysnative with winbatch

-- Detlef Oertel <d.oertel@uib.de>  Mon,  23 Sep 2013:15:00:00 +0200

opsi-winst/opsi-script (4.11.4.1) stable; urgency=low

  * splitted project to opsi-script and opsi-script-nogui
  * splitted unit osmain to osmain and osinteractivegui
  * changed unit names:  * wi* -> os*
  * fixed: Feature  491 : real origin file and line number on syntax error (also on included parts)
  * new unit osencode which contain encoding functions
      known encodings are
        UTF-8      utf8
        UTF-8BOM   utf8bom
        Ansi       ansi
        CP1250     cp1250
        CP1251     cp1251
        CP1252     cp1252
        CP1253     cp1253
        CP1254     cp1254
        CP1255     cp1255
        CP1256     cp1256
        CP1257     cp1257
        CP1258     cp1258
        CP437      cp437
        CP850      cp850
        CP852      cp852
        CP866      cp866
        CP874      cp874
        CP932      cp932
        CP936      cp936
        CP949      cp949
        CP950      cp950
        ISO-8859-1 iso8859-1
        ISO-8859-2 iso8859-2
        KOI-8      koi8
        UCS-2LE    ucs2le
        UCS-2BE    ucs2be
  * fixed: Bug 554 : includelogtail calls reencode
  * command IncludeLog has now an optional 3rd parameter sourceEncoding which may be 'auto', 'system' or a valid encoding.
  * nearly all loadfromfile now with reencode
  * script encoding can now be given with for example
      encoding=utf8
  * loglevel of if/else/endif changed to LLinfo (6) fixes 539
  * loglevel of setLoglevel  changed to LLinfo (6) fixes 535
  * new command 'IsSuspended' interupts script execution and leave productOnClient unchanged   Feature #614
  * shellbatch output is now captured
  * fix in linux getprocesslist: output now: short binary name;pid;user;full command line


-- Detlef Oertel <d.oertel@uib.de>  Tue,  30 Jul 2013:15:00:00 +0200


opsi-winst/opsi-script (4.11.4) stable; urgency=low

  * port to Linux
  * removed logginig via syslog
  * %opsiDepotId%
  * changed unit names:
     * wisynth -> osparser
     * wibatch -> osbatchgui
     * wimain -> osmain
     * wifunc -> osfunc
     * wiwin32 -> osfuncwin2
  * new string function: getLinuxDistroType
  * new stringlist function: getLinuxVersionMap

-- Detlef Oertel <d.oertel@uib.de>  Tue,  30 Apr 2012:15:00:00 +0200


[[opsi-405-releasenotes-misc-changelogs-windows-netboot]]
==== Changelog windows netboot products

windows (4.0.5-1) stable; urgency=low
	* new property setup_after_install (do)
	* create_driver_links.py: do not extract buildIn-drivers from winpe
	* do not change UAC
	* update opsisetuplib.py
  	* sort disks
	* reread changed from sfdisk to partprobe
	* small fix in sfdisk execution
 -- erol ueluekmen <e.ueluekmen@uib.de>  Fri, 18 Jul 2014 12:01:53 +0200

windows (4.0.4-3) stable; urgency=low

	* use of opsisetuplib.py
	* Swapoff all to avoid disk in use
	* copy of winpe_uefi removed

 -- detlef oertel <d.oertel@uib.de>  Fri, 11 Apr 2014 16:01:53 +0200

windows (4.0.4-2) stable; urgency=low

	* UEFI / GPT enabled

 -- detlef oertel <d.oertel@uib.de>  Tue, 25 Feb 2014 16:01:53 +0200

[[opsi-405-releasenotes-misc-changelogs-linux-netboot]]
==== Changelog linux netboot products

.Ubuntu

ubuntu-4.0.5-2 stable; urgency=low
  * added HD-encryption
  * new property encrypt_logical_volumes (will set use_logical_volumes to True)
  * new property encrypt_password
  * need bootimage >= 20140704
-- Detlef Oertel <d.oertel@uib.de>  Mon,  23 Jun 2014:15:00:00 +0200

ubuntu-4.0.5-1 stable; urgency=low
  * added lvm
  * needs opsi 4.0.5 bootimage
  * new property use_logical_volumes
-- Detlef Oertel <d.oertel@uib.de>  Wed,  4 Jun 2014:15:00:00 +0200

ubuntu-4.0.4-5 stable; urgency=low
  * added lvmClearVolumeGroups()
  * use opsipreparelib.py (is symbolic link: use opsi-makeproductfile -h)
-- Detlef Oertel <d.oertel@uib.de>  Fri,  20 May 2014:15:00:00 +0200

ubuntu-4.0.4-4 stable; urgency=low
  * removed property use_raid1 (now always false)
  * removed property blockAlignment (now always true)
-- Detlef Oertel <d.oertel@uib.de>  Fri,  02 May 2014:15:00:00 +0200

ubuntu-4.0.4-3 testing; urgency=low
  * added trusty thar (14.04)
  * retries at debootstrap
  * use opsisetuplib.py (is symbolic link: use opsi-makeproductfile -h)
-- Detlef Oertel <d.oertel@uib.de>  Tue,  18 Mar 2014:15:00:00 +0200

ubuntu-4.0.4-2 UNRELEASED; urgency=low
  * needs now opsi linux bootimage version: 20140118
  * removed 64bit opsi-linux-bootimage and kernel from package
  * modified pxetemplate for new bootimage support
  * small fix in ubuntu.py
  * SERVER_DATA removed
  * fixed postinst
  * UEFI/GPT Support
  * new property setup_after_install

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Fri,  07 Feb 2014:01:00:00 +0200

ubuntu-4.0.4-1 experimental; urgency=low
  * needs now opsi linux bootimage version: 20131021
  * added 64bit opsi-linux-bootimage
  * new property: release
  * install linux-image after grup
  * additional run of update-grub
  * debootstrap script for saucy (copy from raring)
  * pkgdetails for all releases
  * removed property 'desktop'

 -- Detlef Oertel <d.oertel@uib.de>  Tue,  24 Sep 2013:15:00:00 +0200

ubuntu-12.0.4-8 experimental; urgency=low
  * new property: proxy
  * dirtyhack in ubuntu.py: Devicefile not found by creating swap

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Wed,  21 Aug 2013:11:00:00 +0200

ubuntu-12.0.4-7 testing; urgency=low
  * new property: install_opsi-client-agent
  * integration of the Linux opsi-client-agent 4.0.3.2-1
  * some more ' --force-yes'

 -- Detlef Oertel <d.oertel@uib.de>  Mon,  1 Jul 2013:15:00:00 +0200

ubuntu-12.0.4-6 testing; urgency=low
  * timeout (1000 seconds) on debootstrap call

 -- Detlef Oertel / Erol Ueluekmen <info@uib.de>  Tue,  18 June 2013:15:00:00 +0200

ubuntu-12.0.4-5 testing; urgency=low

  * remove property: delete_partition_table (always/if_needed/never) (default=always)
  * new property: data_partition_preserve (always/if_possible/never) (default=never)
  * integrated 64bit opsi-linux-bootimage
    - version 20130427
    - kernel 3.6.11
    - python-opsi 4.0.3.2-1
  * added architecture productProperty
  * added 32 / 64 Bit Support (installs 64 Bit System if started from 64 Bit bootimage)
  * added UEFI/GPT Support
  * minimum disk size changed to 5GB

 -- Detlef Oertel / Erol Ueluekmen <info@uib.de>  Tue,  30 Apr 2013:15:00:00 +0200

ubuntu-12.0.4-4 testing; urgency=low
  * added desktop 'cinnamon'. Will be installed on top of a unity
  * added property wget_and_execute
  * user now in sudo group
  * fixes in unity and xfce installation

 -- Detlef Oertel <d.oertel@uib.de>  Thu,  03 Apr 2013:15:00:00 +0200

ubuntu-12.0.4-3 testing; urgency=low
  * fit to partition scheme for opsi-image-local-(backup/restore)

 -- Detlef Oertel <d.oertel@uib.de>  Fri,  04 Jan 2013:15:00:00 +0200

ubuntu-12.0.4-2 testing; urgency=low
  * update ubuntu.py to opsi 4.0.2-3 standard

 -- Detlef Oertel <d.oertel@uib.de>  Mon,  17 Dec 2012:15:00:00 +0200

ubuntu-12.0.4-1 testing; urgency=low
  * update to 12.04

 -- Detlef Oertel <d.oertel@uib.de>  Fri,  14 Dec 2012:15:00:00 +0200

ubuntu-8.0.4-3 testing; urgency=low
  * changing source var to opsi_depot share (no more 'install')

 -- Detlef Oertel <d.oertel@uib.de>  Fri,  14 Dec 2012:15:00:00 +0200

ubuntu-8.0.4-2 testing; urgency=low

  * initial (J.Schneider ?) 13.5.2009

.openSUSE

opensuse13-1_13.01-4 testing; urgency=low
  * use opsipreparelib.py (is symbolic link: use opsi-makeproductfile -h)
  * code cleanup
  * new property: setup_after_install
  * new property: wget_and_execute
-- Detlef Oertel <d.oertel@uib.de>  Mon,  28 Jul 2014:15:00:00 +0200

opensuse13-1_13.01-3 testing; urgency=low
  * UUID for storage devices
  * added lvmClearVolumeGroups()
  * removed property use_raid1 (now always false)
  * removed property blockAlignment (now always true)
  * use opsisetuplib.py (is symbolic link: use opsi-makeproductfile -h)
-- Detlef Oertel <d.oertel@uib.de>  Tue,  20 May 2014:15:00:00 +0200

opensuse13-1_13.01-2 UNRELEASED; urgency=low
  * needs now opsi linux bootimage version: 20140118
  * removed 64bit opsi-linux-bootimage and kernel from package
  * modified pxetemplate for new bootimage support
  * SERVER_DATA removed
  * fixed postinst
  * fix install opsi server
  * UEFI/GPT Support
  * new property setup_after_install

-- Detlef Oertel <d.oertel@uib.de>  Tue,  18 Feb 2014:15:00:00 +0200

opensuse13-1_13.01-1 stable; urgency=low
  * port from opensuse12-3
-- Detlef Oertel <d.oertel@uib.de>  Tue,  9 Dec 2013:15:00:00 +0200

opensuse12-3_12.03-1 stable; urgency=low
  * port from opensuse (version now part of name because rpms included)
-- Detlef Oertel <d.oertel@uib.de>  Tue,  9 Dec 2013:15:00:00 +0200

opensuse-12.03-2 experimental; urgency=low
  * minimal rpms
-- Detlef Oertel <d.oertel@uib.de>  Tue,  26 Sep 2013:15:00:00 +0200

opensuse-12.03-1 experimental; urgency=low
  * update to 12.03
-- Detlef Oertel <d.oertel@uib.de>  Tue,  24 Sep 2013:15:00:00 +0200

opensuse-10.03-1 experimental; urgency=low

  * initial (J.Schneider ?) 13.5.2009

.Fedora 20

fedora_20_20-4 stable; urgency=low
  * added lvmClearVolumeGroups()
  * removed property use_raid1 (now always false)
  * removed property blockAlignment (now always true)
  * use opsipreparelib.py (is symbolic link: use opsi-makeproductfile -h)
  * new property setup_after_install
  * new property wget_and_execute
  * 32Bit support
-- Detlef Oertel <d.oertel@uib.de>  Tue,  20 May 2014:15:00:00 +0200

fedora_20_20-3 stable; urgency=low
  * retries at base installation
  * use opsisetuplib.py (is symbolic link: use opsi-makeproductfile -h)
-- Detlef Oertel <d.oertel@uib.de>  Tue,  22 Apr 2014:15:00:00 +0200

fedora_20_20-1 stable; urgency=low
  * port from opensuse13-1
-- Detlef Oertel <d.oertel@uib.de>  Mon,  23 Dec 2013:15:00:00 +0200

opensuse13-1_13.01-1 stable; urgency=low
  * port from opensuse12-3
-- Detlef Oertel <d.oertel@uib.de>  Tue,  9 Dec 2013:15:00:00 +0200

opensuse12-3_12.03-1 stable; urgency=low
  * port from opensuse (version now part of name because rpms included)
-- Detlef Oertel <d.oertel@uib.de>  Tue,  9 Dec 2013:15:00:00 +0200

opensuse-12.03-2 experimental; urgency=low
  * minimal rpms
-- Detlef Oertel <d.oertel@uib.de>  Tue,  26 Sep 2013:15:00:00 +0200

opensuse-12.03-1 experimental; urgency=low
  * update to 12.03
-- Detlef Oertel <d.oertel@uib.de>  Tue,  24 Sep 2013:15:00:00 +0200

opensuse-10.03-1 experimental; urgency=low

  * initial (J.Schneider ?) 13.5.2009


[[opsi-405-releasenotes-misc-changelogs-opsi-local-image]]
==== Changelog opsi-local-image

.opsi-local-image-backup

opsi-local-image-win* (4.0.5.1-3) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-backup (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-backup (4.0.5.1-1) stable; urgency=low
	* new property setup_after_install
	* disk sorting
 -- detlef oertel <d.oertel@uib.de>  Thu, 10 Jul 2014 16:01:53 +0200

opsi-local-image-backup (4.0.4.3-1) stable; urgency=low

	* opsisetuplib.py update
	* code cleanup

 -- detlef oertel <d.oertel@uib.de>  Wed, 28 May 2014 16:01:53 +0200

opsi-local-image-backup (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py
	* remove action requests from poc store

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-backup (4.0.4.2-1) stable; urgency=low

	* uefi / gpt support
	* Showing a progress bar when creating a backup.

 -- detlef oertel <d.oertel@uib.de>  Mon, 30 Dec 2013 16:01:53 +0200

opsi-local-image-backup (4.0.4.1-1) stable; urgency=low

  * Handles imagefile names with spaces (internal as '_')
  * fix: stores always the correct netboot product name

 - detlef oertel <d.oertel@uib.de>  16 Dec 2013

opsi-local-image-backup (4.0.3.2-1) stable; urgency=low

  * Now works also with 4 partitions

 - detlef oertel <d.oertel@uib.de>  01 Aug 2013

opsi-local-image-backup (4.0.3-4) stable; urgency=low

  * internal syntax fix: fix image list
  * use partclone with --dev-to-dev instead of --clone

 - detlef oertel <d.oertel@uib.de>  25 Jun 2013

opsi-local-image-backup (4.0.3-3) experimental; urgency=low

  * internal syntax fix: initialize 'goon'

 - detlef oertel <d.oertel@uib.de>  11 Apr 2013

 opsi-local-image-backup (4.0.3-2) experimental; urgency=low

  * new product property 'imagefile'

 - detlef oertel <d.oertel@uib.de>  12 Mar 2013

opsi-local-image-backup (4.0.3-1) experimental; urgency=low

  * initial

 - detlef oertel <d.oertel@uib.de>  15 Oct 2012

.opsi-local-image-capture

opsi-local-image-capture (4.0.5.1-5) stable; urgency=low
	* disabled all calls of ShellInAnIcon_copylog
 -- detlef oertel <d.oertel@uib.de>  Tue, 29 Jul 2014 16:01:53 +0200

opsi-local-image-win* (4.0.5.1-4) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-capture (4.0.5.1-3) stable; urgency=low
	* delete c:\tmp before capture
	* delete c:\drv before capture
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-capture (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-capture (4.0.5.1-1) stable; urgency=low
	* removed property capture_architecture
	* rewmoved property imagefilename
	* removed retry by sdfisk --re-read replaced by partprobe
	* code cleanup
	* fix gpt hidden winpe partition
	* windows partition before reboot and unhide while pe run (PE have to be c:)
	* auto detect drive letter for windows partition (may be different on existence of CD or other partitions)
	* fall back from dism to imagex if dism fails
	* uefi: switch back to uefi netboot (for e.g. opsi-local-image restore)
 -- detlef oertel <d.oertel@uib.de>  Tue, 15 Jul 2014 16:01:53 +0200

opsi-local-image-capture (4.0.4.4-2) stable; urgency=low
	* fixes in setup.py
	* special winst64.exe with ssl
	* removed use of property capture_architecture
	* rewmoved use of property imagefilename

 -- detlef oertel <d.oertel@uib.de>  Fri, 20 Jun 2014 16:01:53 +0200

opsi-local-image-capture (4.0.4.4-1) stable; urgency=low

	* switch back to PE based capture
	* modified winst32 with network connection

 -- detlef oertel <d.oertel@uib.de>  Thu, 5 Jun 2014 16:01:53 +0200

opsi-local-image-capture (4.0.5.1-1) stable; urgency=low

	* opsisetuplib.py update
	* needs opsi 4.0.5 bootimage
	* new property: netboot_product
	* new property: capture_architecture

 -- detlef oertel <d.oertel@uib.de>  Wed, 28 May 2014 16:01:53 +0200

opsi-local-image-capture (4.0.4.3-2) stable; urgency=low

	* use opsi_depot and opsi_depot_rw (samba4 executable bit problem)
	#* experimental: call winst32.exe
	#* new property: netboot_product
	* new property: capture_architecture

 -- detlef oertel <d.oertel@uib.de>  Mon, 28 Apr 2014 16:01:53 +0200

opsi-local-image-capture (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py
	* Swapoff all to avoid disk in use
	* remove action requests from poc store

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-capture (4.0.4.2-1) stable; urgency=low

	* initial: created from opsi-local-image-backup

 -- detlef oertel <d.oertel@uib.de>  Wed, 26 Mar 2014 16:01:53 +0200

.opsi-local-image-delimage
opsi-local-image-win* (4.0.5.1-3) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-delimage (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Thu, 24 Jul 2014 16:01:53 +0200

opsi-local-image-delimage (4.0.5.1-1) stable; urgency=low
	* update of opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 22 Jul 2014 16:01:53 +0200

opsi-local-image-delimage (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-delimage (4.0.4.2-1) stable; urgency=low

	* uefi / gpt support

 -- detlef oertel <d.oertel@uib.de>  Fri, 31 Jan 2014 16:01:53 +0200

opsi-local-image-delimage (4.0.4.1-1) stable; urgency=low

  * Handles imagefile names with spaces (internal as '_')

 - detlef oertel <d.oertel@uib.de>  16 Dec 2013

opsi-local-image-delimage (4.0.3.2-1) stable; urgency=low

  * Now works also with 4 partitions

 - detlef oertel <d.oertel@uib.de>  01 Aug 2013

opsi-local-image-delimage-4.0.3.1-2 testing; urgency=low
  * fix in type call
-- Detlef Oertel <d.oertel@uib.de>  Wed,  08 Apr 2013:15:00:00 +0200

opsi-local-image-delimage-4.0.3.1-1 testing; urgency=low
  * initial
-- Detlef Oertel <d.oertel@uib.de>  Wed,  13 Mar 2013:15:00:00 +0200

.opsi-local-image-prepare

opsi-local-image-win* (4.0.5.1-3) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.5.1-1) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 22 Jul 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.3-4) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 17 Jun 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.3-3) stable; urgency=low

	* start_os_installation editable: True

 -- detlef oertel <d.oertel@uib.de>  Wed, 28 May 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.3-2) stable; urgency=low

	* code cleanup
	* system_partition_size editable: True
	* data_partition_size editable: True

 -- detlef oertel <d.oertel@uib.de>  Tue, 27 May 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.2-3) stable; urgency=low

	* fix: Create backup partition: start is boundaryM + partgapM
	* library: createPartitionEx and createFilesystemEx with success test
	* smaller partGap : 64 M

 -- detlef oertel <d.oertel@uib.de>  Wed, 26 Mar 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.2-2) stable; urgency=low

	* swapoff all before partitioning
	* code cleanup

 -- detlef oertel <d.oertel@uib.de>  Thu, 27 Feb 2014 16:01:53 +0200

opsi-local-image-prepare (4.0.4.2-1) stable; urgency=low

	* uefi / gpt support

 -- detlef oertel <d.oertel@uib.de>  Mon, 30 Dec 2013 16:01:53 +0200

opsi-local-image-prepare (4.0.4.1-1) stable; urgency=low

	* rename to 4.0.4.1-1
	* added win81 products

 -- detlef oertel <d.oertel@uib.de>  Fri, 20 Dec 2013 16:01:53 +0200

opsi-local-image-prepare-4.0.3.2-1 testing; urgency=low
  * #267 Weitere Partitionsgrößen in "opsi-local-image-prepare"
  * new property: data_partition_size ; Default = 0G = partition will not be created
  * Now works also with 4 partitions
-- Detlef Oertel <d.oertel@uib.de>  Wed,  01 Aug 2013:15:00:00 +0200

opsi-local-image-prepare-4.0.3.1-1 testing; urgency=low
  * rename from opsi-local-image-repartition
  * added ProductProperty: start_OS_installation
  * added sleeps and 'sfdisk re-read's and retrries to avoid timing problems after create partition
-- Detlef Oertel <d.oertel@uib.de>  Wed,  13 Feb 2013:15:00:00 +0200

opsi-local-image-repartition-4.0.3.1-1 testing; urgency=low
  * initial
-- Detlef Oertel <d.oertel@uib.de>  Wed,  13 Feb 2013:15:00:00 +0200

.opsi-local-image-restore

opsi-local-image-win* (4.0.5.1-3) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-restore (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-restore (4.0.5.1-1) stable; urgency=low

	* opsisetuplib.py update (new function setNextUefiBoot())
	* removed retry by sdfisk --re-read replaced by partprobe
	* fix: set next uefiboot via setNextUefiBoot()

 -- detlef oertel <d.oertel@uib.de>  Tue, 15 Jul 2014 16:01:53 +0200

opsi-local-image-restore (4.0.4.3-2) stable; urgency=low

	* opsisetuplib.py update
	* retry by sdfisk --re-read
	* fix: IndexError
	* try / except at restoring ntfs ACLs

 -- detlef oertel <d.oertel@uib.de>  Wed, 28 May 2014 16:01:53 +0200

opsi-local-image-restore (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py
	* do not use  PE partition as swap (for reusing PE by capture)

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-restore (4.0.4.2-2) stable; urgency=low

	* raise exception if there is no meta data file

 -- detlef oertel <d.oertel@uib.de>  Mon, 25 Mar 2014 16:01:53 +0200

opsi-local-image-restore (4.0.4.2-1) stable; urgency=low

	* uefi / gpt support
	* Showing a progress bar when restoring a backup.

 -- detlef oertel <d.oertel@uib.de>  Mon, 30 Dec 2013 16:01:53 +0200

opsi-local-image-restore (4.0.4.1-1) stable; urgency=low

  * Fix: failover from rsync to image if rsync fails
  * replace all not allowed image name chars with "_"

 - detlef oertel <d.oertel@uib.de>  16 Dec 2013

opsi-local-image-restore (4.0.3.2-2) stable; urgency=low

  * Fix: timeout increased from 100 to 1000

 - detlef oertel <d.oertel@uib.de>  20 Sep 2013

opsi-local-image-restore (4.0.3.2-1) stable; urgency=low

  * Now works also with 4 partitions

 - detlef oertel <d.oertel@uib.de>  01 Aug 2013

opsi-local-image-restore (4.0.3-7) stable; urgency=low

  * fix: method rsync-restore temporary activated again
  * partclone-image-restore uses now partclone.<fs> --dev-to-dev instaed of partclone.restore
  * mount for rsync uses mount.ntfs instead of imagemount
  * should be use d with backups from opsi-local-image-backup >= 4.0.3-4

 - detlef oertel <d.oertel@uib.de>  27 June 2013

opsi-local-image-restore (4.0.3-6) stable; urgency=low

  * fix: method rsync-restore temporary removed due to ntfs access rights problems and security risks

 - detlef oertel <d.oertel@uib.de>  27 June 2013

opsi-local-image-restore (4.0.3-5) experimental; urgency=low

  * fix: exclude symbolic links from rsync-restore use tar file instead
    should be use d with backups from 4.0.3-4

 - detlef oertel <d.oertel@uib.de>  24 June 2013

opsi-local-image-restore (4.0.3-4) stable; urgency=low

  * fix undefined myvalues in line 571

 - detlef oertel <d.oertel@uib.de>  17 June 2013

opsi-local-image-restore (4.0.3-3) stable; urgency=low

  * property 'method' has now "rsync-partclone-image" as default
  * new property setup_after_restore

 - detlef oertel <d.oertel@uib.de>  17 Apr 2013

opsi-local-image-restore (4.0.3-2) experimental; urgency=low

  * fix: set partition type and bootflag

 - detlef oertel <d.oertel@uib.de>  12 Mar 2013

opsi-local-image-restore (4.0.3-1) experimental; urgency=low

  * initial

 - detlef oertel <d.oertel@uib.de>  15 Oct 2012

.opsi-local-image-sysprep

opsi-local-image-sysprep (4.0.5.1-1) stable; urgency=low

	* deactivate opsi-client-agent before sysprep
	* set uefi netboot before reboot if a netboot product is activated

 -- detlef oertel <d.oertel@uib.de>  Tue, 15 Jul 2014 16:01:53 +0200

opsi-local-image-sysprep (4.0.4.3-1) stable; urgency=low

	* more features

 -- detlef oertel <d.oertel@uib.de>  Mon, 07 Apr 2014 16:01:53 +0200

opsi-local-image-sysprep (1.0-1) testing; urgency=low

  * Initial version based on opsi-sysprep

 -- d.oertel <d.oertel@uib.de> Wed, 26 Mar 2014 16:39:34 + 0100

.opsi-local-image-win* 

opsi-local-image-win* (4.0.5.1-3) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Fri, 25 Jul 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.5.1-2) stable; urgency=low
	* update opsisetuplib.py
 -- detlef oertel <d.oertel@uib.de>  Tue, 24 Jul 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.5.1-1) stable; urgency=low
	* diskpart.txt is now gpt aware
	* no delete of opsi directory in PE via cleanup
	* create_driver_links.py: do not extract buildIn-drivers from winpe (eu)
	* code cleanup: no dual disk (ever only first disk)
 -- detlef oertel <d.oertel@uib.de>  Fri, 3 Jul 2014 10:01:53 +0200

opsi-local-image-win7 (4.0.4.3-3) stable; urgency=low
	* opsisetuplib.py update
 -- detlef oertel <d.oertel@uib.de>  Wed, 28 May 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.4.3-2) stable; urgency=low
	* fix in setup_after_install
 -- detlef oertel <d.oertel@uib.de>  Thu, 22 May 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.4.3-1) stable; urgency=low

	* use of opsisetuplib.py
	* property imagename now editable
	* Swapoff all to avoid disk in use
	* lvmClearVolumeGroups() to avoid disk in use

 -- detlef oertel <d.oertel@uib.de>  Fri, 28 Mar 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.4.2-2) stable; urgency=low

	* syntax fix

 -- detlef oertel <d.oertel@uib.de>  Thu, 27 Feb 2014 16:01:53 +0200

opsi-local-image-win7 (4.0.4.2-1) stable; urgency=low

	* uefi / gpt support

 -- detlef oertel <d.oertel@uib.de>  Mon, 30 Dec 2013 16:01:53 +0200

opsi-local-image-win7 (4.0.4.1-2) stable; urgency=low

	* UCS 3.2 Errata 4 fix: mount share from PE with valid domain:
		shareusername via webservice from clientconfig.depot.user

 -- detlef oertel <d.oertel@uib.de>  Thu, 16 Jan 2014 16:01:53 +0200


opsi-local-image-win7 (4.0.4.1-1) stable; urgency=low

  * new product property setup_after_install: list of products which will be switched to setup with dependencies
  * if backup_after_install is true, the product property imageFile of opsi-local-image-backup will be set to '' (empty)

-- detlef oertel <d.oertel@uib.de>  16 Dec 2013

opsi-local-image-win7 (4.0.3.2-1) stable; urgency=low

  * Now works also with 4 partitions

-- detlef oertel <d.oertel@uib.de>  01 Aug 2013

opsi-local-image-win7 (4.0.3-2) stable; urgency=low

  * better error messages on wrong partition table

 -- uib GmbH <info@uib.de>  Wed, 17 Apr 2013 13:30:20 +0000

opsi-local-image-win7 (4.0.3-1) experimental; urgency=low

  * changed to match opsi-local-image standard

 -- uib GmbH <info@uib.de>  Wed, 13 Feb 2013 13:30:20 +0000


[[opsi-405-releasenotes-misc-changelogs-python-opsi]]
==== Changelog python-opsi

python-opsi (4.0.5.6-1) experimental; urgency=low

  * Fix for certificate creation on SLES11SP3

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 25 Aug 2014 15:26:42 +0200

python-opsi (4.0.5.5-1) testing; urgency=medium

  * setProductActionRequestWithDependencies: added optional force
    parameter, to set dependend products even if they are installed

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Sat, 23 Aug 2014 02:37:20 +0200

python-opsi (4.0.5.4-3) testing; urgency=low

  * Also build on Ubuntu 10.04

 -- Niko Wenselowski <n.wenselowski@uib.de>  Fri, 22 Aug 2014 17:28:08 +0200

python-opsi (4.0.5.4-2) experimental; urgency=low

  * 40_groupActions.conf: _getClientsOnDepotByHostGroup get correct clients.
  * Debian: call dh --with python2

 -- Niko Wenselowski <n.wenselowski@uib.de>  Fri, 22 Aug 2014 17:18:16 +0200

python-opsi (4.0.5.3-2) experimental; urgency=low

  * SLES: Require libmagic1 for working python-magic

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 19 Aug 2014 12:55:00 +0200

python-opsi (4.0.5.3-1) experimental; urgency=low

  * Fix termination of KillableThread on newer Pythons 

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 11 Aug 2014 14:09:02 +0200

python-opsi (4.0.5.2-7) experimental; urgency=low

  * RHEL / CentOS: Depending on MySQL-python instead python-mysql
  * openSUSE / SLES: Fix depending on wrong version number for python-newt

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 06 Aug 2014 12:10:08 +0200

python-opsi (4.0.5.2-5) experimental; urgency=low

  * Dependencies for RHEL / CentOS 6 fixed and cleaned up .spec.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 06 Aug 2014 11:20:25 +0200

python-opsi (4.0.5.2-4) experimental; urgency=low

  * Re-Enabling dependency on python-ldaptor.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 16:39:12 +0200

python-opsi (4.0.5.2-2) experimental; urgency=low

  * Possible to build with python-support again.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 14:35:00 +0200

python-opsi (4.0.5.2-1) experimental; urgency=low

  * fix in write method for backendConfigFiles

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Sun, 03 Aug 2014 03:26:28 +0200

python-opsi (4.0.5.1-2) experimental; urgency=low

  * Using dh_python2

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 30 Jul 2014 17:38:00 +0200

python-opsi (4.0.5.1-1) experimental; urgency=low

  * New module: OPSI.Util.Task.Sudoers
  * 70_dynamic_depot.conf: Latency algorythm does even work if pinging
    a depot results in a timeout.
  * OpsiBackupArchive: Avoid hanging in an endless loop when running
    backupMySQLBackend and stderr gets spammed with the same message
  * DHCPD Backend: Trying to read the address of an client from the
    DHCPD configuration file if it can't be resolved via DNS.
  * Certificate Creation: Using 2048 bit instead of 1024
  * small fix in getOpsiHostKey method
  * configed: direct access for mysql-backend users
  * forceUrl method don't convert value to lower
  * OpsiBackupArchive: get path to mysqldump via which
  * Speeding up backend_getInterface, getArgAndCallString, objectToHtml,
    objectToBeautifiedText
  * New module: OPSI.Util.Task.ConfigureBackend.ConfigurationData
  * Added possibility to disable pigz in opsi.conf
  * SQL-Backends: Improved speed of query creation
  * Do not fail on removing installed products if the directory
    contains filenames with unicode characters
  * OPSI.System.Posix: Fixing reread partiontable problem with new bootimage
  * OPSI.System.Windows: Added setLocalSystemTime and getServiceTime in backend
  * Driverintegration: Fallback for byAudit to check if mainboard integration is possible.
  * OPSI.System.Posix: initializing bytesPerSector attribute in Harddisk class
    constructor
  * OPSI.Util.Repository: workarround timing problem after reconnect network
    adapter

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Thu, 28 Jul 2014 23:51:00 +0200


[[opsi-405-releasenotes-misc-changelogs-opsipxeconfd]]
==== Changelog opsipxeconfd


opsipxeconfd (4.0.5.3-2) experimental; urgency=low

  * Fix for logrotate under SLES11SP3

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 25 Aug 2014 11:36:03 +0200

opsipxeconfd (4.0.5.3-1) experimental; urgency=low

  * Fix in modules handling

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Thu, 07 Aug 2014 01:45:00 +0200

opsipxeconfd (4.0.5.2-1) experimental; urgency=low

  * Fix in custom pxeConfTemplate-file handling.

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 04 Aug 2014 16:09:14 +0200

opsipxeconfd (4.0.5.1-3) experimental; urgency=low

  * Support for building with python-support added again.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 14:48:15 +0200

opsipxeconfd (4.0.5.1-2) experimental; urgency=low

  * Changed build system to dh_python2

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 30 Jul 2014 17:33:46 +0200

opsipxeconfd (4.0.5.1-1) experimental; urgency=low

  * Correctly stopping the service on non-SUSE machines on upgrade/uninstall 
  * uefi support

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 08 Jul 2014 11:59:08 +0200


[[opsi-405-releasenotes-misc-changelogs-opsiconfd]]
==== Changelog opsiconfd


opsiconfd (4.0.5.1-7) experimental; urgency=low

  * Fix for newer logrotate-versions not applied on SLES because 11SP3
    provides an updated version that can handle su directive

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 19 Aug 2014 16:41:48 +0200

opsiconfd (4.0.5.1-6) experimental; urgency=low

  * Suggesting only on SLES, not everyone.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 13 Aug 2014 16:27:34 +0200

opsiconfd (4.0.5.1-5) experimental; urgency=low

  * python-rrdtool is not required but suggested.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 13 Aug 2014 16:14:13 +0200

opsiconfd (4.0.5.1-4) experimental; urgency=low

  * Lowering required debhelper version for building Ubuntu 10.04

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 14:25:31 +0200

opsiconfd (4.0.5.1-3) experimental; urgency=low

  * Re-enabling build dependency python-support for older distros.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 13:59:27 +0200

opsiconfd (4.0.5.1-2) experimental; urgency=low

  * Using dh_python instead of python-support

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 30 Jul 2014 17:29:48 +0200

opsiconfd (4.0.5.1-1) experimental; urgency=low

  * Improved info page render speed.
  * Info page: show additional information about running threads
  * Info page: display human-readable time at thread information

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 10 Jun 2014 12:36:13 +0200


[[opsi-405-releasenotes-misc-changelogs-opsi-utils]]
==== Changelog opsi-utils

opsi-utils (4.0.5.4-1) experimental; urgency=low

  * opsi-newprod correctly copies the contents of the template-directory

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 13 Aug 2014 11:31:53 +0200

opsi-utils (4.0.5.3-2) experimental; urgency=low

  * Fix for reading the home dir.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 11 Aug 2014 15:53:58 +0200

opsi-utils (4.0.5.3-1) experimental; urgency=low

  * opsi-admin: Added another try on reading the users home directory.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 05 Aug 2014 17:02:03 +0200

opsi-utils (4.0.5.2-2) experimental; urgency=low

  * Make building with Fedora possible.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 04 Aug 2014 15:53:19 +0200

opsi-utils (4.0.5.2-1) experimental; urgency=low

  * opsi-product-updater: small bugfix

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Sun, 03 Aug 2014 03:35:50 +0200

opsi-utils (4.0.5.1-1) experimental; urgency=low

  * opsi-newprod: New feature -t: Copy files from a template directory
  * opsi-package-manager: Now able to use -t when extracting
  * opsi-product-updater: Support for smtpuser and smtppassword to be
    able to use it with systems that require authentication.
  * opsi-product-updater: Support for SMTP connections that use STARTTLS
  * Debian: Recommend mysql-client as it is useful when creating backups
  * opsi-makeproductfile: new option --no-pigz to disable pigz usage
  * opsi-package-manager: Product properties are sorted by name when
    installing a product with "-p ask".
  * opsi-product-updater: Fix handing over the temp directory when
    installing a package.
  * opsi-product-updater: ProductPackageFile now uses setting "tempDir"
  * opsi-product-updater: Added inherit ProductProperties from Master-Repository
  * opsi-product-updater: Stops if unknown parameter is given on start
  * opsi-product-updater: Limit updates to specific package with "-p"

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Fri, 26 Jul 2014 00:03:13 +0200


[[opsi-405-releasenotes-misc-changelogs-opsi-linux-bootimage]]
==== Changelog opsi-linux-bootimage

opsi-linux-bootimage (20140811-1) experimental; urgency=medium

  * IA-32Emulation for 64 bit bootimage
  * Added opsi-utils to package dependencies

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 12 Aug 2014 12:50:47 +0200

opsi-linux-bootimage (20140729-1) experimental; urgency=low

  * Posix.py: 
      Fix for unrecognized partition table
      Fix for readRotational method

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 30 Jul 2014 01:47:48 +0200

opsi-linux-bootimage (20140725-1) experimental; urgency=low

  * updated pigz to ver 2.3.1
  * updated sfdisk to ver 2.25
  * added fixed bytesPerSector problem in Posix.py
  * modprobe patched for bootimage

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Thu, 25 Jul 2014 10:21:05 +0200

opsi-linux-bootimage (20140717-1) experimental; urgency=low

  * Bases on Ubuntu Precise (12.04)
  * kernel 3.15.1
  * python-opsi 4.0.5.1
  * uefi-support added

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Fri, 04 Jul 2014 14:53:13 +0200


[[opsi-405-releasenotes-misc-changelogs-opsi-depotserver]]
==== Changelog opsi-depotserver


opsi-depotserver (4.0.5.6-1) experimental; urgency=medium

  * --auto-configure-samba fix for executebit problem even if 
    opsi_depot-Shareconfig already exists.

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Sun, 17 Aug 2014 13:42:03 +0200

opsi-depotserver (4.0.5.5-1) experimental; urgency=low

  * --auto-configure-dhcpd does not fail on missing file 

 -- Niko Wenselowski <n.wenselowski@uib.de>  Mon, 11 Aug 2014 17:31:12 +0200

opsi-depotserver (4.0.5.4-1) experimental; urgency=low

  * Workaround for getopt not correctly reading in JSON objects.

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 05 Aug 2014 12:29:21 +0200

opsi-depotserver (4.0.5.3-1) experimental; urgency=low

  * Renewing a certificate automatically sets rights on file

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 05 Aug 2014 10:39:18 +0200

opsi-depotserver (4.0.5.2-1) experimental; urgency=low

  * Fix in samba4 detection

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Sun, 03 Aug 2014 00:56:54 +0200

opsi-depotserver (4.0.5.1-1) experimental; urgency=low

  * Using OPSI.Util.Task.ConfigureBackend.MySQL
  * Samba4 Fix
  * RHEL / CentOS: Running --auto-configure-dhcp grants rights to opsi
    administrator group on /etc/dhcp
  * Create configuration item "clientconfig.dhcpd.filename" on update
  * Using OPSI.Util.Task.ConfigureBackend.ConfigurationData

 -- Niko Wenselowski <n.wenselowski@uib.de>  Fri, 30 May 2014 11:48:09 +0200


// [[opsi-405-releasenotes-misc-changelogs-opsi4ucs]]
// ==== Changelog opsi4ucs

// dummy text

[[opsi-405-releasenotes-opsi-configed]]
==== Changelog opsi-configed

opsi-configed (4.0.5.0.1) 
   * deep rebuild of data structures for accelerating data representation
   * reachable test as background process
   * redesign of failure infos
	

[[opsi-405-releasenotes-opsi-swaudit]]
==== Changelog opsi-swaudit

swaudit (4.0.5-1) stable; urgency=low
  * Fix writing to long entries in sub_create_hash4 by adding to all string values something like "name="+strPart($name$,"1","99")
  * codecleanup
  * changelog to control file
 -- detlef oertel <d.oertel@uib.de>  Fri, 01 Aug 2014 15:00:00 +0100


