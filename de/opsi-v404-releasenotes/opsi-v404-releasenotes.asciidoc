////
; Copyright (c) uib gmbh (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; http://creativecommons.org/licenses/by-sa/3.0/de/
; http://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; http://creativecommons.org/licenses/by-sa/3.0/
; http://creativecommons.org/licenses/by-sa/3.0/legalcode
; 
; credits: http://www.opsi.org/credits/
////


:Author:    uib gmbh
:Email:     info@uib.de
:Date:      26.02.2013
:Revision:  4.0.3
:doctype:		book

// Include common opsi terms
include::../common/opsi_terms.asciidoc[]

= opsi Version 4.0.4 Release Notes

// Include common opsi copyright
include::../common/opsi_manual_copyright.asciidoc[]

[[opsi-404-releasenotes-overview]]
== Übersicht der Neuerungen

Das opsi Service Releases 4.0.3 weist eine Fülle von Neuerungen und Detailverbesserungen auf. Hier eine Übersicht:

* opsi Erweiterung: Install-on-shutdown (Kofinanzierungsprojekt)

* neues opsi Feature: Silent-Install

* Lokalisierung für Italienisch und Dänisch

* Freigabe von opsi 4.0.3 für folgende Distributionen:

** UCS 3.1
** Ubuntu 12.10

Die entsprechenden Installationsanleitungen finden Sie wie immer im 'opsi-getting-started' Handbuch

* Abkündigung zum 31.03.2013 der Unterstützung für:

** CentOs 5
** RedHat 5
** OpenSuse 11.3 / 11.4

* opsi-client-agent

** Umfangreich überarbeitete Version
** Freigabe der opsi-Erweiterung: Dynamische Depotauswahl
** opsi Erweiterung: Install-on-shutdown
** opsi Feature: Silent-Install
** Verbessertes Customizing
** Anpassungen für Windows 8 Support
** Überarbeitetes Sessionhandling: Bessere Identifikation der Benutzerkonten.
** Verbesserungen im WAN-Support
** Mehrere kleinere Fixes

* opsi Serverkomponenten

** Verbesserungen im DHCP-Backend
** Neues HostControlSafe-Backend
** Neuerstellung des Webservice-SSL-Zertifkats über opsi-setup

* Windows Netboot Produkte

** Windows 8 / Server 2012 Unterstützung
** Verbesserungen an byAudit-Verfahren
** WinPE-Partitionsgröße konfigurierbar
** Neues Property data_partition_create : Soll eine Datenpartition erzeugt werden, wenn noch Platz verfügbar ist (true/false ; default: true).
** UEFI Support
** Unterstützung für Softwareraid 1: neues Property 'useRaid1' behandelt 2 vorhandene Platten identisch.

* opsi-winst: +
Eine Fülle von Erweiterungen, welche weiter unten beschrieben sind.

* Ankündigung Lizenzwechsel GPLv3 zu AGPLv3: +
Im Laufe des opsi 4.0.3 Releases werden wir zur AGPLv3 wechseln. +
Dieser Lizenzwechsel betrifft nur Firmen, welche opsi als Bestandteil einer Closed Source Lösung vertreiben.
Wer eine Lizenz für den Vertrieb von opsi als Bestandteil einer Closed Source Lösung benötigt, möge uns kontaktieren.

Für Details lesen Sie bitte das opsi-v403-releasenotes Hanbuch bzw. die überarbeiteten opsi Handbücher.

[[opsi-404-releasenotes-eol]]
== Abkündigung

In diesem Kapitel werden die Abkündigung aufgelistet. Diese Distributionsversionen werden aus verschiedenen Gründen nicht mehr weiter von opsi unterstützt.

[[opsi-404-releasenotes-eol_python24]]
=== Abkündigung der Python 2.4 Unterstützung

Mit diesem Featurepack-Release wird offiziell die Unterstützung für Python 2.4 eingestellt. Dies betrifft Python 2.4 Distributionen: Redhat 5 und Centos 5. Die betroffenen Repositories werden am 31.03.2013 geschlossen. Die Paketstände zu diesem Termin, werden auf download.uib.de im Archiv veröffentlicht. Für Betroffene opsi-Systeme empfehlen wir den Upgrade auf die Neuen Distributionsversionen, die noch Unterstützt werden.

[[opsi-404-releasenotes-eol_distros]]
=== Abkündigung: Distributionsversionen

Folgende Systeme werden mangels Maintainance vom Hersteller abgekündigt:

** openSuse 11.3
** Ubuntu 10.10
** Ubuntu 11.04
** Ubuntu 11.10

Auch die oben genannten Repositories werden am 31.03.2013 geschlossen. Für betroffene Installationen empfehlen wir dringend ein OS-Upgrade durch zu führen. Allerdings sollten Sie vorher prüfen, ob die Version zu der Sie aktualisieren wollen auch von opsi unterstützt wird.



[[opsi-404-releasenotes-installation]]
== Hinweise zur Installation

Die Produkte welche im Rahmen dieses Releases veröffentlicht werden, sind in etlichen Teilen voneinander abhängig. Sie sollten daher nicht versuchen nur Teile zu installieren.

Sie sollten dabei zuerst den Server updaten und danach die opsi-Produkte.

////
Zur Installation der testing Serverpakete müssen Sie das opsi Repository ändern von 'opsi40' auf 'opsi40-testing'. +
Zum Beispiel bei Ubuntu 12.04: +
`deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/opsi40/xUbuntu_12.04 ./` +
ersetzen durch: +
`deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/opsi40-testing/xUbuntu_12.04 ./`

Danach müssen Sie Ihre Pakete updaten. +
Zum Beispiel bei Ubuntu / Debian:
[source,prompt]
----
aptitude update
aptitude dist-upgrade
----

Zur Installation der testing opsi Produkte 
[source,prompt]
----
cd /home/opsiproducts
mkdir opsi403
cd opsi403
wget -r -l1 -nc -nd -A "*.opsi" http://download.uib.de/opsi4.0/testing/opsi403/products/
opsi-package-manager -i *.opsi
----
Sollte der wget Befehl scheitern, so muss evtl. die Umgebungsvariable http_proxy auf den korrekten Proxystring gesetzt werden (z.B. http_proxy=http://192.168.1.5:8080/)

////
Die Installation erfordert keine besonderen Arbeiten. Sie erfolgt im Rahmen der normalen Updates ihres Servers und der opsi-Produkte.

Sie sollten dabei zuerst den Server updaten und danach die opsi-Produkte. Dies erledigt der opsi-product-updater:

[source,prompt]
----
opsi-product-updater -i -vv
----


Sollten Sie eine Multidepot Umgebung haben, so machen Sie zunächst das Upgrade auf Ihrem config-server, bevor Sie die Depots upgraden.


[[opsi-winst]]
== opsi-winst 4.11.3.10



[[opsi-configed]]
== opsi-configed 4.0.3.1

[[opsi-manual-configuration-tools-opsi-configed-hostproperties]]
=== Host-Parameter in der Client- und der Serverkonfiguration

Zur besseren Übersicht werden die Host-Parameter jetzt gegliedert nach Funktionsgruppen aufgeführt. 
Die Gruppen sind auf der linken Seite in einer baumartigen Struktur dargestellt. Jeweils die zugehörigen 
Parameter und ihre Werte werden, wenn die Gruppe links aktiviert ist, auf der rechten Seite präsentiert.

.'{opsi-configed}': Tab Hostparameter (Server- und Client-Konfiguration)
image::../images/opsi-configed-hostparameters.png["{opsi-configed}: Tab Hostparameter (Server- und Client-Konfiguration)", width=400]


[[opsi-manual-configuration-tools-opsi-configed-logfiles]]
=== Logdateien

Der Level, bis zu dem die Logeinträge sichtbar sind, kann jetzt mit einem Schieberegler variiert werden, so dass Fehler
leichter gefunden werden können. Der Regler ist auch mausrad-bedienbar.

Event-bezogene Logs können selektiert werden.

.'{opsi-configed}': Tab Logdateien
image::../images/opsi-configed-logfiles.png["{opsi-configed}: Tab Logdateien", width=400]

[[opsi-404-releasenotes-misc]]
== Sonstiges

[[opsi-404-releasenotes-misc-externalReferences]]
=== Verweise auf das opsi-manual


[[opsi-404-releasenotes-misc-changelogs]]
=== Changelogs:


[[opsi-404-releasenotes-misc-changelogs-opsi-winst]]
==== Changelog opsi-winst

opsi-winst (4.11.3.10) stable; urgency=low

* manifest extended for win 8.1: <supportedOS Id="{1f676c76-80e1-4239-95bb-83d0f6d0da78}"/>:
    http://msdn.microsoft.com/en-us/library/windows/desktop/dn302074%28v=vs.85%29.aspx

-- Detlef Oertel <d.oertel@uib.de>  Tue,  22 Oct 2013:15:00:00 +0200

opsi-winst (4.11.3.9) stable; urgency=low

  * Patchtextfile: no trim of searchstrings: use gestringA instead of getString
  * wilog: all log strings are cut to max 500 chars

-- Detlef Oertel <d.oertel@uib.de>  Thu,  02 Sep 2013:15:00:00 +0200

opsi-winst (4.11.3.8-2) stable; urgency=low

  * Fix in internal Version: now 4.11.3.8

-- Detlef Oertel <d.oertel@uib.de>  Fri,  02 Aug 2013:15:00:00 +0200

opsi-winst (4.11.3.8) stable; urgency=low

  * changed TOpsiMethodCall.getJsonHashListString: converting string with SO before assingment

-- Detlef Oertel <d.oertel@uib.de>  Thu,  01 Aug 2013:15:00:00 +0200

opsi-winst (4.11.3.7) stable; urgency=low

  * changed DsiWin32 to work with lazarus 1.0.8/fpc 2.6.2
  * new command: isSuccess : Terminates Script execution with out error
  * new command: noUpdateScript : Do not run a update after setup script even if it is there and we are not failed
  * new function emptylist
  * new function getlistcontainingList

-- Detlef Oertel <d.oertel@uib.de>  Tue,  29 Jul 2013:15:00:00 +0200

[[opsi-404-releasenotes-misc-changelogs-windows-netboot]]
==== Changelog windows netboot products




[[opsi-404-releasenotes-misc-changelogs-python-opsi]]
==== Changelog python-opsi

python-opsi (4.0.4.1-1) testing; urgency=low

  * Minimum required Python version is now 2.6
  * New backend method for configed: setRights
  * Tar archives: make use of pigz for parallel gzip compression if available.
    Requires pigz version >2.2.3
  * File backend: Added options to configure user/group the files belong to.
  * Bugfix: Added missing import to prevent "opsi-setup --renew-opsiconfd-cert"
    from crashing
  * Bugfix: Do not fail when reading distribution information from an UCS
    system.
  * Bugfix in posix.py for precise
  * Remove loading geo_override kernel patch
  * Fixing mountoptions handling for cifs-mount
  * Added Transaction control for sql-backends for prevent of duplicate entries in productProperty-Defaultvalues. (fixes #456)
  * New module: OPSI.Util.Task.Certificate

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 12 Sep 2013 11:41:33 +0200

python-opsi (4.0.3.3-1) experimental; urgency=low

  * Fixes for wheezy and raring support
  * System.Windows: Added handling mshotfix for win8 and win2012
  * Moved method formatFileSize from OPSI.web2.dirlist to OPSI.Util
  * Added 40_groupActions.conf in opsi-webservice-extender
  * Modified debian postinst script (user opsiconfd will be created if not exists)

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 03 Jun 2013 11:41:33 +0200

python-opsi (4.0.3.2-1) experimental; urgency=low

  * Don't load geo_override module on 64bit bootimage.

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 29 Apr 2013 16:13:16 +0200

[[opsi-404-releasenotes-misc-changelogs-opsipxeconfd]]
==== Changelog opsipxeconfd

opsipxeconfd (4.0.4.1-1) testing; urgency=low

  * Specified user / group to use for logrotate 3.8 or newer

 -- Niko Wenselowski <n.wenselowski@uib.de>  Wed, 21 Aug 2013 11:58:55 +0200


[[opsi-404-releasenotes-misc-changelogs-opsiconfd]]
==== Changelog opsiconfd

opsiconfd (4.0.4.1-1) experimental; urgency=low

  * Internals: re-organised imports to work with newer python-opsi.
  * Specified user / group to use for logrotate 3.8 or newer

 -- Niko Wenselowski <n.wenselowski@uib.de>  Fri, 04 Oct 2013 22:23:17 +0200

opsiconfd (4.0.3.2-1) experimental; urgency=low

  * resource.py: max-heap-size increased to 1024M.

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Wed, 29 May 2013 16:21:39 +0200

[[opsi-404-releasenotes-misc-changelogs-opsi-utils]]
==== Changelog opsi-utils

opsi-utils (4.0.4.1-1) testing; urgency=low

  * opsi-admin: Code cleanups resulting in an depending on python-opsi 4.0.3.4
  * added manpages
  * added includeProductIds in repostory-configuration for opsi-product-updater.conf

 -- Niko Wenselowski <n.wenselowski@uib.de>  Tue, 22 Oct 2013 11:31:19 +0200
 
opsi-utils (4.0.3.2-1) testing; urgency=low

  * opsi-admin: added task uninstallWhereInstalled

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Fri, 06 Sep 2013 10:04:53 +0200


[[opsi-404-releasenotes-misc-changelogs-opsi-linux-bootimage]]
==== Changelog opsi-linux-bootimage

opsi-linux-bootimage (20131021-1) testing; urgency=low

  * Fixes in pre-execute handling
  * fixes from python-opsi: 4.0.4.1-1
  * EFI-stub added for kernel compile instructions

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 21 Oct 2013 15:02:53 +0200

opsi-linux-bootimage (20130920-1) experimental; urgency=low

  * kernel 3.10.10
  * python-opsi: 4.0.4.1-1
  * added pre-execute handling

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 23 Sep 2013 04:19:32 +0200

opsi-linux-bootimage (20130207-2) experimental; urgency=low

  * Quick Hack for Bios-Versions, that have only a option for "RAID+AHCI"
    - this devices will be shown as RAID mode Devices in lshw output

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 22 Apr 2013 15:41:29 +0200


[[opsi-404-releasenotes-misc-changelogs-opsi-depotserver]]
==== Changelog opsi-depotserver

opsi-depotserver (4.0.4.1-1) testing; urgency=low

  * opsi-setup: Making use of new module OPSI.Util.Task.Certificate
  * opsi-set-rights: new wrapper script added for opsi-setup --set-rights

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Mon, 07 Oct 2013 08:25:38 +0200

opsi-depotserver (4.0.3.4-1) experimental; urgency=low

  * opsi-setup: Ignoring entries of configed.saved_search in
                --edit-config-defaults
  * opsi-setup: Truncating long value entries if they are longer than 60
                characters
  * opsi-setup: added SMB-Shares: opsi_depot_rw and opsi_images

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 03 Sep 2013 12:50:37 +0200

opsi-depotserver (4.0.3.3-1) experimental; urgency=low

  * opsi-setup: cleanupBackend fixes now duplicate productProperty default values in mysql-backend
                new option --patch-sudoers-file

 -- Erol Ueluekmen <e.ueluekmen@uib.de>  Tue, 31 May 2013 17:05:07 +0200

[[opsi-404-releasenotes-misc-changelogs-opsi4ucs]]
==== Changelog opsi4ucs

opsi4ucs (4.0.4.1-1) testing; urgency=low

  * join Script: Fixing executable-Bit problem for opsi_depot Share
  * Removing opt_pcbin-Share
  * Adding opsi_depot_rw and opsi_images Share
 
[[opsi-404-releasenotes-opsi-configed]]
==== Changelog opsi-configed

 * bugfix in start routines

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 19 Sep 2013 10:56:24 +0200

  * other opsiclientd events callable from configed

 -- Rupert Roeder <r.roeder@uib.de>  Tue, 17 Sep 2013 16:56:24 +0200

  * new invokeLater construct to try to avoid gui thread problem

 -- Rupert Roeder <r.roeder@uib.de>  Tue, 17 Sep 2013 12:56:24 +0200

  * menu entries for client adding and removing can be disabled by a configed
  * product action page with package installation and completing a win product ready

 -- Rupert Roeder <r.roeder@uib.de>  Mon, 16 Sep 2013 17:02:14 +0200

  * product action page implemented with package installation and completing a windows product
  * improved startup thread handling

 -- Rupert Roeder <r.roeder@uib.de>  Mon, 28 Aug 2013 14:00:00 +0200

opsi-configed (4.0.3.4.9-1) testing;  urgency=low

  * general exception handler set
  * new client call deleteProductCaches

 -- Rupert Roeder <r.roeder@uib.de>  Mon, 19 Aug 2013 14:00:00 +0200

  * tree reload bugs eliminated (redmine #511)

 -- Rupert Roeder <r.roeder@uib.de>  Fri, 26 Jul 2013 14:00:00 +0200

  * null pointer exception repaired which prevented subgroups of GROUPS

 -- Rupert Roeder <r.roeder@uib.de>  Tue, 23 Jul 2013 14:00:00 +0200

  * experimental Polish, Spanish, and Russian localization

 -- Rupert Roeder <r.roeder@uib.de>  Mon, 08 Jul 2013 14:00:00 +0200

  * product sorting of product list reconfigured to secondary strength in
    order to distinguish products by hyphens

 -- Rupert Roeder <r.roeder@uib.de>  Tue, 18 Jun 2013 14:00:00 +0200

  * group action for local image restore

 -- Rupert Roeder <r.roeder@uib.de>  Mon, 17 Jun 2013 14:00:00 +0200

  * concept for locally saving session data introduced
  * first usage for saving the selected depots and saving a selected group
  * fixing a bug in group selection

 -- Rupert Roeder <r.roeder@uib.de>  Thu, 13 Jun 2013 14:00:00 +0200

  * experimental synced data model completed for product_on_client

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 31 May 2013 14:00:00 +0200

  * fixed: product list is reloaded when changing depot (representative)
  * the data for searching are now cached (with some exception behalf of memory problems)

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 29 May 2013 14:00:00 +0200

  * fixed: setting again an old value of a host is now possible
  * implementing some variations of loading PRODUCT_ON_CLIENT with performance
  tests

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 22 May 2013 14:00:00 +0200

  * fixed: now keeping installation state table model when directly returning to the same table
  * trying to get construction of installation state table modle more efficient

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 20 Mar 2013 16:00:00 +0200

  * fixed: now updating product table after saving by context menu

 -- Rupert Roeder <r.roeder@uib.de>  Wed, 20 Mar 2013 16:00:00 +0200

  * more efficient webservice call for getting productOnClients
  * setting requested heap space to 1024m

 -- Rupert Roeder <r.roeder@uib.de>  Thu, 14 Mar 2013 16:00:00 +0200

